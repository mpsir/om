import{openBlock,createBlock,Fragment,createVNode,renderSlot,createCommentVNode,resolveComponent,ref,withCtx}from"vue";const _sfc_main$2={name:"toggle-content",props:{show_inner_p:{type:Boolean,default:!0,required:!1}},data:()=>({show_inner:!0}),created(){this.show_inner=this.show_inner_p},mounted(){var e=this,t=this.$refs.controls;if((o=$(t).find(".toggle-handle"))[0]){var o=o[0];$(o).click((function(){e.show_inner=!e.show_inner}))}else console.log("no handle found",'\nadd "toggle-handle" class to any ui element.')}},_hoisted_1$2={ref:"controls"};function _sfc_render$2(e,t,o,a,r,i){return openBlock(),createBlock(Fragment,null,[createVNode("span",_hoisted_1$2,[renderSlot(e.$slots,"control")],512),r.show_inner?renderSlot(e.$slots,"default",{key:0}):createCommentVNode("",!0)],64)}_sfc_main$2.render=_sfc_render$2;const _sfc_main$1={name:"monaco-editor",data:()=>({Value:null,input_type:"string"}),setup:function(e,{attrs:t,slots:o,emit:a,expose:r}){return{editor:{},g:Vue.computed((()=>g))}},props:{modelValue:{type:String,required:!0},update_text:{type:String,required:!1,default:"Update"},lang:{type:String,required:!1,default:"json"},format_on_start:{type:Boolean,required:!1,default:!0},IsReadOnly:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue","update"],created(){this.update_modelValue()},watch:{modelValue:{handler(e,t){this.update_modelValue()},deep:!0}},mounted(){var e=this;this.editor=g.monaco.editor.create(this.$refs.m_editor,{value:e.Value,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,language:e.lang,readOnly:!1,minimap:{enabled:!1},showFoldingControls:"always",scrollbar:{vertical:"hidden",horizontal:"visible"},overviewRulerBorder:!1}),setTimeout((()=>{this.update_editor()}),100),e.format_on_start&&(setTimeout((()=>{this.editor.getAction("editor.action.formatDocument").run()}),500),this.Value=this.editor.getValue()),this.editor.getModel().onDidChangeContent((t=>{e.update_editor(),e.Value=e.editor.getValue(),e.$emit("update:modelValue",e.Value)}));const t=()=>{this.editor.getContribution("editor.contrib.folding").getFoldingModel().then((t=>{t.onDidChange((()=>{e.Value=e.editor.getValue()}))}))};t(),this.editor.onDidChangeModel(t)},methods:{update_editor:function(){const e=19*this.editor.getModel().getLineCount();$(this.$refs.m_editor).css("height",e+"px"),this.editor.layout(),this.Value=this.editor.getValue()},update_modelValue(){this.Value=this.modelValue;try{this.editor.getModel().setValue(this.modelValue),this.format_on_start&&this.editor.getAction("editor.action.formatDocument").run()}catch(e){}},update_parent(){this.$emit("update",this.Value)}}},_hoisted_1$1={key:0},_hoisted_2$1={style:{border:"1px dashed darkgrey"}},_hoisted_3$1={ref:"m_editor",style:{"min-height":"28px"}};function _sfc_render$1(e,t,o,a,r,i){const n=resolveComponent("q-btn");return openBlock(),createBlock(Fragment,null,[o.IsReadOnly?createCommentVNode("",!0):(openBlock(),createBlock("div",_hoisted_1$1,[createVNode(n,{onClick:t[1]||(t[1]=e=>i.update_parent()),color:"white","text-color":"black",label:o.update_text,"no-caps":""},null,8,["label"])])),createVNode("div",_hoisted_2$1,[createVNode("div",_hoisted_3$1,null,512)])],64)}_sfc_main$1.render=_sfc_render$1;const _sfc_main={name:"home-electron",computed:{g:()=>g},setup:()=>({tab:ref("Server")})},_hoisted_1=createVNode("div",{class:"text-h4 q-mb-md"},"Server",-1),_hoisted_2=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_3=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_4=createVNode("div",{class:"text-h4 q-mb-md"},"Pages",-1),_hoisted_5=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_6=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_7=createVNode("div",{class:"text-h4 q-mb-md"},"Comps",-1),_hoisted_8=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_9=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_10=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_11=createVNode("div",{class:"text-h4 q-mb-md"},"3000",-1),_hoisted_12=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_13=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1),_hoisted_14=createVNode("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.",-1);function _sfc_render(e,t,o,a,r,i){const n=resolveComponent("q-tab"),s=resolveComponent("q-tabs"),l=resolveComponent("q-tab-panel"),u=resolveComponent("q-tab-panels");return openBlock(),createBlock("div",null,[createVNode(s,{modelValue:a.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>a.tab=e),class:"text-teal",align:"left"},{default:withCtx((()=>[createVNode(n,{name:"Server","no-caps":"",label:"Server"}),createVNode(n,{name:"Pages","no-caps":"",label:"Pages"}),createVNode(n,{name:"Comps","no-caps":"",label:"Comps"}),createVNode(n,{name:"c3000","no-caps":"",label:"3000"})])),_:1},8,["modelValue"]),createVNode(u,{modelValue:a.tab,"onUpdate:modelValue":t[2]||(t[2]=e=>a.tab=e)},{default:withCtx((()=>[createVNode(l,{name:"Server"},{default:withCtx((()=>[_hoisted_1,_hoisted_2,_hoisted_3])),_:1}),createVNode(l,{name:"Pages"},{default:withCtx((()=>[_hoisted_4,_hoisted_5,_hoisted_6])),_:1}),createVNode(l,{name:"Comps"},{default:withCtx((()=>[_hoisted_7,_hoisted_8,_hoisted_9,_hoisted_10])),_:1}),createVNode(l,{name:"c3000"},{default:withCtx((()=>[_hoisted_11,_hoisted_12,_hoisted_13,_hoisted_14])),_:1})])),_:1},8,["modelValue"])])}_sfc_main.render=_sfc_render,g.h.comps={MonacoEditor:_sfc_main$1,ToggleContent:_sfc_main$2},g.h.pages={ElectronHome:_sfc_main},g.r=Vue.reactive({IsLive:!0,BlockEditor:!0,Editor:!0}),g.f={pstring:e=>JSON.parse(JSON.stringify(e)),string:e=>JSON.stringify(e),parse:e=>JSON.parse(e),Socket:{add_socket(){g.f.is_local_host()?io("http://localhost:8080/"):"mpsir.github.io"!=location.host&&g.io("http://super1mpsir-57484.portmap.host:57484/")}},Data:{get_live_data:e=>VueUse.useObservable(Dexie.liveQuery(e)),is_local_host:function(){return"8080"==location.port||"3000"==location.port},get_page_name(){var e=location.search;if(""==e)return"home";const t=new URLSearchParams(e).get("page");return t||"home"}},get_page_array_no:function(e){var t=0;return g.h.pages.forEach((function(o,a){e==o.name&&(t=a)})),t},Resolve:{App(page_object,page_name){var page_address=`g.h.pages[${g.f.get_page_array_no(page_name)}]`,page_object=g.f.pstring(page_object),r={};for(var key in page_object.VApp){var k=page_object.VApp[key],n=`r.${key}`,c=`${n} = ${k}`;eval(c)}return r.template=g.f.Resolve.Template(page_object.template,page_address,page_address+".template"),console.log("r.template\n",r.template),console.log("page_object:in",page_object),console.log("app_object:out",r,"\n\n"),r},Template(e,t,o){var a="";return a+="<App>","string"==typeof e?a+=e:(a+="<block-element",a+=" :p_address=\"'p_address'\"",a+=" :t_address=\"'t_address'\"",a+=">",a+="</block-element>"),a+="</App>"},GetPageFromDB(e){var t=g.h.pages.find((function(t){return e==t.name}));return t||{template:"page not found"}},GetCompFromDB(e){var t=g.h.comps.find((function(t){return e==t.name}));return t||{template:`comp not found : ${e}`}}},App:{async Start(){console.log("\nApp is Starting ...\n\n"),g.App_Wrapper=Vue.createApp(g.h.pages.ElectronHome),g.App_Wrapper.use(Quasar),g.App_Wrapper.component("draggable",vuedraggable),g.App_Wrapper.component("monaco-editor",g.h.comps.MonacoEditor),g.App_Wrapper.component("toggle-content",g.h.comps.ToggleContent),g.App=g.App_Wrapper.mount("#app-div")},async Create_Default_App(){globalThis.hasOwnProperty("process")?g.d.IsElectronApp=!0:g.d.IsElectronApp=!1,g.r.current_page_name=g.f.Data.get_page_name(),g.d.current_page_object=g.f.Resolve.GetPageFromDB(g.r.current_page_name);var e=g.f.Resolve.App(g.d.current_page_object,g.r.current_page_name);g.App_Wrapper=Vue.createApp(e),g.App_Wrapper.component("draggable",vuedraggable),g.App_Wrapper.component("monaco-editor",g.f.Resolve.GetCompFromDB("monaco-editor")),g.App_Wrapper.component("toggle-content",g.f.Resolve.GetCompFromDB("toggle-content")),g.App=g.App_Wrapper.mount("#app-div")},async Create_Editor_App(){g.Editor_Wrapper=Vue.createApp(g.Editor),g.Editor_Wrapper.component("draggable",vuedraggable),g.Editor_Wrapper.component("monaco-editor",g.f.Resolve.GetCompFromDB("monaco-editor")),g.Editor_Wrapper.component("toggle-content",g.f.Resolve.GetCompFromDB("toggle-content")),g.Editor=g.Editor_Wrapper.mount("#editor-div")},update(){g.App&&(g.App_Wrapper.unmount(),$("#app-div").removeAttr("data-v-app"),g.f.App.Create_Default_App())}},Open_Editor(e,t){}};
