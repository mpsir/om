!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Vue)}(this,(function(e){"use strict";g.createApp=async function(e={App:{},VueShortkey:!0,Quasar:!0,vdrag:!0,DraggableResizable:!0,draggable:!0,Ast:!0,MonacoEditor:!0,ToggleContent:!0}){var t=Vue.createApp(e.App);return e.VueShortkey&&t.use(window.VueShortkey),e.Quasar&&t.use(Quasar),e.vdrag&&t.use(vdrag,{}),e.DraggableResizable&&t.use(Vue3DraggableResizable.default),e.draggable&&t.component("draggable",vuedraggable),e.MonacoEditor&&t.component("monaco-editor",g.comps.MonacoEditor),e.ToggleContent&&t.component("toggle-content",g.comps.ToggleContent),e.Ast&&(t.component("ast-editor",g.comps.ast.AstEditor),t.component("ast-string",g.comps.ast.AstString)),t.mount("#app-div")};const t={setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{g:Vue.computed((()=>g))}},data:()=>({Value:g.r.funs})},o={style:{border:"1px solid darkslategray",padding:"16px",margin:"8px","border-radius":"2px"}},a=e.createVNode("h6",null,"ast editor demo",-1),l={class:"q-my-sm"},n=e.createVNode("button",{class:"toggle-handle q-pa-sm"},"Value",-1),r={class:"q-pa-sm"};t.render=function(t,d,s,i,u,c){const p=e.resolveComponent("toggle-content"),m=e.resolveComponent("ast-editor");return e.openBlock(),e.createBlock("div",o,[a,e.createVNode("div",l,[e.createVNode(p,{show_inner_p:!1},{control:e.withCtx((()=>[n])),default:e.withCtx((()=>[e.createVNode("div",r,e.toDisplayString(u.Value),1)])),_:1}),e.createVNode(m,{"onUpdate:modelValue":d[1]||(d[1]=e=>u.Value=e),modelValue:u.Value},null,8,["modelValue"])])])};const d={setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{g:Vue.computed((()=>g)),val:Vue.ref("var a = 55")}}},s={style:{border:"1px solid darkslategray",padding:"16px",margin:"8px"}},i=e.createVNode("h6",null,"monaco_editor demo",-1),u={class:"q-my-sm"},c={class:"q-my-lg q-pa-sm",style:{border:"1px solid grey"}},p=e.createTextVNode(" with v-model "),m=e.createVNode("pre",null,e.toDisplayString('\n<monaco-editor v-model="val" :IsReadOnly="false"\n        :language="\'javascript\'" :format_on_start="true" />\n'),-1),V={class:"q-my-lg q-pa-sm",style:{border:"1px solid grey"}},h=e.createTextVNode(" with manual update "),v=e.createVNode("pre",null,e.toDisplayString('\n<monaco-editor :modelValue="val" @update="val= $event"\n        :IsReadOnly="false" :language="\'javascript\'"\n        :format_on_start="true" />\n'),-1),y={class:"q-my-lg q-pa-sm",style:{border:"1px solid grey"}},f=e.createTextVNode(" hide update "),_=e.createVNode("pre",null,e.toDisplayString('\n<monaco-editor @update="val= $event"\n        :IsReadOnly="true"\n        :language="\'javascript\'"\n        :modelValue="val"\n        :format_on_start="true" />\n'),-1);d.render=function(t,o,a,l,n,r){const d=e.resolveComponent("monaco-editor");return e.openBlock(),e.createBlock("div",s,[i,e.createVNode("div",u,e.toDisplayString(t.val),1),e.createVNode("div",c,[p,e.createVNode(d,{modelValue:t.val,"onUpdate:modelValue":o[1]||(o[1]=e=>t.val=e),IsReadOnly:!1,language:"javascript",format_on_start:!0},null,8,["modelValue"]),m]),e.createVNode("div",V,[h,e.createVNode(d,{modelValue:t.val,onUpdate:o[2]||(o[2]=e=>t.val=e),IsReadOnly:!1,language:"javascript",format_on_start:!0},null,8,["modelValue"]),v]),e.createVNode("div",y,[f,e.createVNode(d,{onUpdate:o[3]||(o[3]=e=>t.val=e),IsReadOnly:!0,language:"javascript",modelValue:t.val,format_on_start:!0},null,8,["modelValue"]),_])])};const N={setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{g:Vue.computed((()=>g))}},data:()=>({})},k={style:{border:"1px solid darkslategray",padding:"16px",margin:"8px","border-radius":"2px"}},b=e.createVNode("h6",null,"toggle-content demo",-1),w={class:"q-my-sm q-pa-sm",style:{border:"1px solid grey"}},C=e.createVNode("p",null,"inner data is opened by default.",-1),x=e.createVNode("button",{class:"toggle-handle q-pa-sm"},"click",-1),B=e.createVNode("div",null," Inner data ",-1),q=e.createVNode("pre",null,e.toDisplayString('\n<toggle-content>\n    <template #control>\n      <button class="toggle-handle">click</button>\n    </template>\n    <div> Inner data </div>\n</toggle-content>\n'),-1),S={class:"q-my-sm q-pa-sm",style:{border:"1px solid grey"}},O=e.createVNode("button",{class:"toggle-handle q-pa-sm"},"click",-1),D=e.createVNode("div",null," Inner data ",-1),A=e.createVNode("pre",null,e.toDisplayString('\n<toggle-content :show_inner_p="false">\n    <template #control>\n      <button class="toggle-handle">click</button>\n    </template>\n    <div> Inner data </div>\n</toggle-content>\n'),-1);N.render=function(t,o,a,l,n,r){const d=e.resolveComponent("toggle-content",!0);return e.openBlock(),e.createBlock("div",k,[b,e.createVNode("div",w,[C,e.createVNode(d,null,{control:e.withCtx((()=>[x])),default:e.withCtx((()=>[B])),_:1}),q]),e.createVNode("div",S,[e.createVNode(d,{show_inner_p:!1},{control:e.withCtx((()=>[O])),default:e.withCtx((()=>[D])),_:1}),A])])};const R={components:{"ast-editor-demo":t,"monaco-editor-demo":d,"toggle-content-demo":N},setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{g:Vue.computed((()=>g)),current_demo:Vue.ref("ast-editor-demo")}}},j={class:"q-pt-sm"},I=e.createVNode("option",{value:"ast-editor-demo"},"ast-editor",-1),M=e.createVNode("option",{value:"monaco-editor-demo"},"monaco-editor",-1),U=e.createVNode("option",{value:"toggle-content-demo"},"toggle-content-demo",-1);R.render=function(t,o,a,l,n,r){const d=e.resolveComponent("ast-editor-demo"),s=e.resolveComponent("monaco-editor-demo"),i=e.resolveComponent("toggle-content-demo"),u=e.resolveComponent("q-page-container"),c=e.resolveComponent("q-layout");return e.openBlock(),e.createBlock(c,{view:"hHh lpR fFf"},{default:e.withCtx((()=>[e.createVNode(u,null,{default:e.withCtx((()=>[e.createVNode("div",j,[e.withDirectives(e.createVNode("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>t.current_demo=e),class:"q-ma-sm q-pa-sm"},[I,M,U],512),[[e.vModelSelect,t.current_demo]]),"ast-editor-demo"==t.current_demo?(e.openBlock(),e.createBlock(d,{key:0})):e.createCommentVNode("",!0),"monaco-editor-demo"==t.current_demo?(e.openBlock(),e.createBlock(s,{key:1})):e.createCommentVNode("",!0),"toggle-content-demo"==t.current_demo?(e.openBlock(),e.createBlock(i,{key:2})):e.createCommentVNode("",!0)])])),_:1})])),_:1})};const T={setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{g:Vue.computed((()=>g)),new_type:Vue.ref("ast-string")}},data:()=>({Value:null}),props:{modelValue:{required:!0,type:Object}},emits:["update:modelValue"],created(){this.update_modelValue()},watch:{modelValue:{handler(e,t){this.update_modelValue()},deep:!0}},methods:{create_new(){this.Value.body.splice(0,0,{type:this.new_type}),this.update_parent()},update_modelValue(){var e=JSON.parse(JSON.stringify(this.modelValue));this.Value=e},update_parent(e=this.Value){this.$emit("update:modelValue",this.Value)}}},J=e.createVNode("h6",{style:{"margin-bottom":"8px",color:"darkgray"}},"Script",-1),F={class:"q-mb-md"},E=e.createStaticVNode('<option value="ast-scope">Scope</option><option value="ast-null">Null</option><option value="ast-undefined">Undefined</option><option value="ast-string">String</option><option value="ast-number">Number</option><option value="ast-boolean">Boolean</option><option value="ast-object">Object</option><option value="ast-function">Function</option><option value="ast-class">Class</option><option value="ast-promise">Promise</option>',10),z={key:1};T.render=function(t,o,a,l,n,r){return e.openBlock(),e.createBlock(e.Fragment,null,[J,e.createVNode("div",F,[e.createVNode("button",{onClick:o[1]||(o[1]=e=>{r.create_new()}),class:"q-pa-sm"},"+"),e.withDirectives(e.createVNode("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>t.new_type=e),class:"q-mx-sm q-pa-sm"},[E],512),[[e.vModelSelect,t.new_type]])]),n.Value.body.length?(e.openBlock(!0),e.createBlock(e.Fragment,{key:0},e.renderList(n.Value.body,((t,o)=>(e.openBlock(),e.createBlock("div",null,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.type),{"onUpdate:modelValue":e=>{n.Value.body[o]=e,r.update_parent()},modelValue:n.Value.body[o]},null,8,["onUpdate:modelValue","modelValue"]))])))),256)):(e.openBlock(),e.createBlock("div",z," 0 items. "))],64)};const P={setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{g:Vue.computed((()=>g))}},data:()=>({Value:null}),props:{modelValue:{required:!0,type:Object}},emits:["update:modelValue"],created(){this.update_modelValue()},watch:{modelValue:{handler(e,t){this.update_modelValue()},deep:!0}},methods:{update_modelValue(){var e=JSON.parse(JSON.stringify(this.modelValue));this.Value=e},update_parent(){this.$emit("update:modelValue",this.Value)}}};P.render=function(t,o,a,l,n,r){return e.openBlock(),e.createBlock("div",null," ast module inside ")};const Q={components:{"ast-script":T,"ast-module":P},setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{g:Vue.computed((()=>g))}},data:()=>({Value:null}),props:{modelValue:{required:!0,type:Object}},emits:["update:modelValue"],created(){this.update_modelValue()},watch:{modelValue:{handler(e,t){this.update_modelValue()},deep:!0}},methods:{update_modelValue(){var e=JSON.parse(JSON.stringify(this.modelValue));e.hasOwnProperty("type")||(e.type="Script"),e.hasOwnProperty("body")||(e.body=[]),this.Value=e},update_parent(e=this.Value){this.$emit("update:modelValue",e)}}};Q.render=function(t,o,a,l,n,r){const d=e.resolveComponent("ast-script"),s=e.resolveComponent("ast-module");return e.openBlock(),e.createBlock("div",null,["Script"==n.Value.type?(e.openBlock(),e.createBlock(d,{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>r.update_parent(e)),modelValue:n.Value},null,8,["modelValue"])):e.createCommentVNode("",!0),"Module"==n.Value.type?(e.openBlock(),e.createBlock(s,{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>r.update_parent(e)),modelValue:n.Value},null,8,["modelValue"])):e.createCommentVNode("",!0)])};const L={setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{g:Vue.computed((()=>g))}},data:()=>({Value:null}),props:{modelValue:{type:Object,required:!0,default:""}},emits:["update:modelValue"],created(){this.update_modelValue()},watch:{modelValue:{handler(e,t){this.update_modelValue()},deep:!0}},methods:{update_modelValue(){this.Value=g.f.pstring(this.modelValue),this.Value.hasOwnProperty("value")||(this.Value.value="some string",this.update_parent())},update_parent(){this.$emit("update:modelValue",this.Value)}}},H={style:{},class:"cursor-pointer"},G={class:"toggle-handle q-my-sm"};L.render=function(t,o,a,l,n,r){const d=e.resolveComponent("q-input"),s=e.resolveComponent("toggle-content");return e.openBlock(),e.createBlock("div",H,[e.createVNode(s,{show_inner_p:!1},{control:e.withCtx((()=>[e.createVNode("div",G,e.toDisplayString(n.Value.value),1)])),default:e.withCtx((()=>[e.createVNode("div",null,[e.createVNode(d,{style:{width:"100%"},color:"grey-3","label-color":"orange",outlined:"",modelValue:n.Value.value,"onUpdate:modelValue":o[1]||(o[1]=e=>n.Value.value=e)},null,8,["modelValue"])])])),_:1})])};const K={data:()=>({Value:null,input_type:"string"}),setup:function(e,{attrs:t,slots:o,emit:a,expose:l}){return{editor:{},g:Vue.computed((()=>g))}},props:{modelValue:{type:String,required:!0},language:{type:String,required:!1,default:"json"},format_on_start:{type:Boolean,required:!1,default:!0},IsReadOnly:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue","update"],created(){this.update_modelValue()},watch:{modelValue:{handler(e,t){this.update_modelValue()},deep:!0}},mounted(){var e=this;this.editor=g.monaco.editor.create(this.$refs.m_editor,{value:e.Value,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,language:e.language,readOnly:!1,minimap:{enabled:!1},showFoldingControls:"always",scrollbar:{vertical:"hidden",horizontal:"visible"},overviewRulerBorder:!1}),setTimeout((()=>{this.update_editor()}),100),e.format_on_start&&(setTimeout((()=>{this.editor.getAction("editor.action.formatDocument").run()}),500),this.Value=this.editor.getValue()),this.editor.getModel().onDidChangeContent((t=>{e.update_editor(),e.Value=e.editor.getValue(),e.$emit("update:modelValue",e.Value)}));const t=()=>{this.editor.getContribution("editor.contrib.folding").getFoldingModel().then((t=>{t.onDidChange((()=>{e.Value=e.editor.getValue()}))}))};t(),this.editor.onDidChangeModel(t)},methods:{update_editor:function(){const e=19*this.editor.getModel().getLineCount();$(this.$refs.m_editor).css("height",e+"px"),this.editor.layout(),this.Value=this.editor.getValue()},update_modelValue(){this.Value=this.modelValue;try{this.editor.getModel().setValue(this.modelValue),this.format_on_start&&this.editor.getAction("editor.action.formatDocument").run()}catch(e){}},update_parent(){this.$emit("update",this.Value)}}},W={key:0},X={style:{border:"1px dashed darkgrey"}},Y={ref:"m_editor",style:{"min-height":"28px"}};K.render=function(t,o,a,l,n,r){const d=e.resolveComponent("q-btn");return e.openBlock(),e.createBlock(e.Fragment,null,[a.IsReadOnly?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock("div",W,[e.createVNode(d,{onClick:o[1]||(o[1]=e=>r.update_parent()),color:"white","text-color":"black",label:"Update","no-caps":""})])),e.createVNode("div",X,[e.createVNode("div",Y,null,512)])],64)};const Z={props:{show_inner_p:{type:Boolean,default:!0,required:!1}},data:()=>({show_inner:!0}),created(){this.show_inner=this.show_inner_p},mounted(){var e=this,t=this.$refs.controls;if((o=$(t).find(".toggle-handle"))[0]){var o=o[0];$(o).click((function(){e.show_inner=!e.show_inner}))}else console.log("no handle found",'\nadd "toggle-handle" class to any ui element.')}},ee={ref:"controls"};Z.render=function(t,o,a,l,n,r){return e.openBlock(),e.createBlock(e.Fragment,null,[e.createVNode("span",ee,[e.renderSlot(t.$slots,"control")],512),n.show_inner?e.renderSlot(t.$slots,"default",{key:0}):e.createCommentVNode("",!0)],64)},g.comps=g.comps||{},g.comps.MonacoEditor=K,g.comps.ast=g.comps.ast||{},g.comps.ast.AstEditor=Q,g.comps.ast.AstString=L,g.comps.ToggleContent=Z,g.d={},g.r=Vue.reactive({funs:{type:"Script",body:[{type:"ast-string"}]}}),g.f={pstring:e=>JSON.parse(JSON.stringify(e)),string:e=>JSON.stringify(e),parse:e=>JSON.parse(e),is_local_host:function(){return"8080"==location.port||"3000"==location.port},start:async function(){var e={},t=!1;g.f.is_local_host()?(e=io("http://localhost:8080/"),t=!0):"mpsir.github.io"!=location.host&&(e=g.io("http://super1mpsir-57484.portmap.host:57484/"),t=!0),t&&e.on("connect",(()=>{})),g.VApp=g.createApp({App:R,VueShortkey:!0,Quasar:!0,vdrag:!0,DraggableResizable:!0,draggable:!0,Ast:!0,MonacoEditor:!0,ToggleContent:!0})}}}));
