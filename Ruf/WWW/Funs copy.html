<!DOCTYPE html>
<html lang="en">

<head>
  <title>Funs</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="/Lib/core-js-bundle@3.29.1/minified.min.js"></script>
  <link rel="stylesheet" href="/Lib/material-icons/iconfont/material-icons.css">
  <link rel="stylesheet" href="/Lib/quasar/quasar.css">
  <link rel="stylesheet" href="/Frame/CSS/roboto-local.css">
  <link rel="stylesheet" href="/Frame/CSS/Boot.css">
  <link rel="stylesheet" href="/Lib/jq/jquery-ui.min.css">
  <link
    href="data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAADUsYIAS6/pAAI29gD9/f4A+fHmAA8x0gC8vroAx6HiACBbtgAHbPMAUIvjAD7f+AA6lt4Ah+L9AKyemQD8/vwA/f78AP7+/ADw+P0ATYDRANvUxgCp+PgA6KfAAPRdwQC1ldQA+P79APDXtQB+W6sAqTWYAPz+/QDLx8sArLypAP7+/QD51qcABB/NAOO2hgBXaacAkDZ+APb49gCguuoA2cK4AAMy6wDI9v4A/f7+ANSYuwAFL+MA/v7+AMV7qgBcQ8gA64PMAPLZuQDv1/kAy2frAMK1zgDt7e0ACTbxAOa8oAAH2vsAxV/hAN6F0ABneOEA4IjxAP7+/wCILHsAb4FkAHjKuAChl+sAZEWSAO3l7ADvv/wA3bOBAA1F6QDaluwAj0DIANG1zwD4+f4Al3VLAB2n7gCEW6YApmnQADJmtADJl+IA8s28AP3a0QDKm74A79GxAP7//gD09PQA///+AGmD5QDXg/EA3j6qAKNOkACe7/4A3Y32AB89pQD1f9IAq+z+AD1k5AD9//8A/v//AP///wBxpJkAYqr9AP3t3wDw8PAAtrydALy0xAD7/voASdbuAP39/QDu7u4A39/fAE7Q3gBQlv0AqntEAEux/ADktZcA+P3+AGnLwgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZWVlZWVlZWVlZEQrZWVlZWVlZWVlYx5hckpOMWVlZWVlZWVlLlxDZwE7HDACLmVlZWVlBGovPyYqGRAFX2JlZWVlR1l3MlZWZWVlEilGZWVlHQwIditlZWVlZRFATBFlZSwYN2VlZWVlZWVlGkg1ZS4kJS5lV29waWllZTM8XmUuFgZlZVc2cGlpbmVlPUVlIUEAZWVlZWVlZWVlZXUfFGUjUi5lZVhlZWVlZQNoU2VlBxNJC3FaNGtlZWVgG1suZStPUU0JOkIOZWU+DRdUZWVlLj4VOSBVZjgtCm10K2VlZWVlZWVlbHMoUCJdD2VlZWVlZWVlZWVlZSdLZWVlZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="
    rel="icon" type="image/x-icon" />
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="/Lib/monaco-editor/min/vs/editor/editor.main.css" />
  <link rel="stylesheet" href="/Lib/primeflex/primeflex.css">
  <link rel="stylesheet" href="/Lib/primeflex/themes/saga-blue.css">
  <script> "function" != typeof JSON.decycle && (JSON.decycle = function (e, t) { "use strict"; var n = new WeakMap; return function e(a, r) { var o, c; return void 0 !== t && (a = t(a)), "object" != typeof a || null === a || a instanceof Boolean || a instanceof Date || a instanceof Number || a instanceof RegExp || a instanceof String ? a : void 0 !== (o = n.get(a)) ? { $ref: o } : (n.set(a, r), Array.isArray(a) ? (c = [], a.forEach((function (t, n) { c[n] = e(t, r + "[" + n + "]") }))) : (c = {}, Object.keys(a).forEach((function (t) { c[t] = e(a[t], r + "[" + JSON.stringify(t) + "]") }))), c) }(e, "$") }), "function" != typeof JSON.retrocycle && (JSON.retrocycle = function retrocycle($) { "use strict"; var px = /^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\(?:[\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*")\])*$/; return function rez(value) { value && "object" == typeof value && (Array.isArray(value) ? value.forEach((function (element, i) { if ("object" == typeof element && null !== element) { var path = element.$ref; "string" == typeof path && px.test(path) ? value[i] = eval(path) : rez(element) } })) : Object.keys(value).forEach((function (name) { var item = value[name]; if ("object" == typeof item && null !== item) { var path = item.$ref; "string" == typeof path && px.test(path) ? value[name] = eval(path) : rez(item) } }))) }($), $ }); </script>
  <script src="/Lib/socket-io-client.js"></script>
  <script src="/Lib/rxjs.umd.min.js"></script>
  <script src="/Lib/sortablejs/Sortable.min.js"></script>
  <script src="/Lib/dexie/dexie.min.js"></script>
  <script src="/Lib/vue/vue.global.min.js"></script>
  <script src="/Lib/vuedraggable/vuedraggable.umd.min.js"></script>
  <script src="/Lib/@vueuse/shared@9.13.0/index.iife.min.js"></script>
  <script src="/Lib/@vueuse/core@9.13.0/index.iife.min.js"></script>
  <script src="/Lib/@vueuse/rxjs/index.iife.min.js"></script>
  <script src="/Lib/vue3-shortkey.min.js"></script>
  <script src="/Lib/jq/jquery.js"></script>
  <script src="/Lib/jq/jquery-ui.min.js"></script>
  <script src="/Lib/jq/touch.js"></script>
  <script src="/Lib/mitt.umd.js"></script>
  <script>
    var g = globalThis;
    g.d = {}
  </script>
  <script src="/Frame/JS/App/app.js"></script>
</head>

<body>

  <div id="app-div">
    <div class="p-2">
      <div v-if="g.r.App_Index != null">

        <div>
          {{ typeof g.r.App_Index }}
        </div>
        
        <div>
          <button class="p-2" @click="update_App_Index()">Update to server</button>
        </div>
        
        <div class="text-h6 text-500 p-2">Funs</div>

        <div class="my-2">
          <toggle-content :show_inner_p="false">
            <template v-slot:control>
              <button class="toggle-handle p-2">r</button>
            </template>
            <div class="my-2">
              <pre>{{g.r}}</pre>
            </div>
          </toggle-content>
        </div>

        <div class="my-2">
          <toggle-content :show_inner_p="false">
            <template v-slot:control>
              <button class="toggle-handle p-2">Funs</button>
            </template>
            <div class="my-2">
              <monaco-editor class="text-500" :lang="'json'" :update_text="'update'"
                @update="g.r.App_Index = JSON.parse($event)" :parsed="JSON.stringify(g.r.App_Index)">
              </monaco-editor>
            </div>
          </toggle-content>
        </div>

        <div class="my-2">
          <toggle-content :show_inner_p="true">
            <template v-slot:control>
              <button class="toggle-handle p-2">Json Editor</button>
            </template>            
            <div class="my-2" v-if="true">
              <json-editor 
                :parsed="g.JSONF.parse( g.JSONF.stringify(g.r.App_Index) )" 
                @update="g.console.log($event)"  />
            </div>
            <div class="my-2" v-if="false">
              <json-editor 
                :parsed="test_fun_1" 
                @update="g.console.log($event)"  />
            </div>
          </toggle-content>
        </div>

      </div>
    </div>
  </div>

  <script>
    g.r = Vue.reactive({
      IsLive: true, IsEditor: true, App_Index: null
    })  
  </script>

  <script>
    var test_fun_1 = async function(){
            console.log(5);
    }
    $(document).ready(function () {

      g.App_Wrapper = Vue.createApp({
        data:function(){
          return {
            test_fun_1 : async function(){
              console.log(7888);
            }
          }
        },
        computed: { g() { return g } },
        mounted(){
          // this.test_fun_1()
          // var a = g.JSONF.stringify(this.test_fun_1)
          // console.log(this.test_fun_1);
        },
        methods: {
          // test_fun_1 : async function(){
          //   console.log(5);
          // },
          update_App_Index() {
            socket.emit(
              'msg',
              {
                type: "admin",
                subt_type: "Set_App_Funs",
                data: g.r.App_Index
              }
            )
          }
        }
      })

      var add_to_f = {
        update: function () {
          if (g.App) {
            g.App_Wrapper.unmount()
            $('#app-div').removeAttr('data-v-app')
            g.f.Create_Default_App()
          }
        },
        Create_Default_App: function () {
          g.App_Wrapper.use(Quasar)
          g.App_Wrapper.component("monaco-editor",  g.comps.monaco_editor)
          g.App_Wrapper.component("toggle-content", g.comps.toggle_content)
          g.App_Wrapper.component("json-editor",    g.comps.json_editor)
          g.App_Wrapper.component("j-string",       g.comps.j_string)
          g.App_Wrapper.component("j-number",       g.comps.j_number)
          g.App_Wrapper.component("j-boolean",      g.comps.j_boolean)
          g.App_Wrapper.component("j-object",       g.comps.j_object)
          g.App_Wrapper.component("j-array-basic",        g.comps.j_array_basic)
          g.App_Wrapper.component("j-array-obj",        g.comps.j_array_obj)

          g.App_Wrapper.component("j-function-basic", g.comps.j_function_basic)
          g.App_Wrapper.component("j-function-arrow", g.comps.j_function_arrow)
          g.App_Wrapper.component("j-function-async", g.comps.j_function_async)

          g.App = g.App_Wrapper.mount('#app-div')
        },
        got_msg: function (socket, data, c_back) {
          switch (data.type) {
            case 'Set_App_Funs': g.r.App_Index = data.data; break;
            default: break;
          }
        },
        add_socket: function () {
          g.socket = io(g.f.get_socket_address())
          socket.on('connect', function () {
            socket.emit(
              'msg',
              { type: "admin", subt_type: "Get_Funs" },
              function (data) { 
                console.log(data);
                g.r.App_Index = data 
              }
            )
          });
          socket.on('disconnect', function (socket) { });
          socket.on('reconnect', function (socket) { });
          socket.on('msg', function (data, c_back) { f.got_msg(socket, data, c_back) });
        }
      }

      g.f = { ...g.f, ...add_to_f }
      g.f.Create_Default_App()
      g.f.add_socket()

    });
  </script>

  <script src="/Lib/quasar/quasar.js"></script>
  <script> var require = { paths: { vs: '/Lib/monaco-editor/min/vs' } }; </script>
  <script src="/Lib/monaco-editor/min/vs/loader.js"></script>
  <script src="/Lib/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
  <script src="/Lib/monaco-editor/min/vs/editor/editor.main.js"></script>

</body>

</html>