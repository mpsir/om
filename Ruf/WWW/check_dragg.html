<!DOCTYPE html>
<html lang="en">

<head>
    <title>Home</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/Lib/core-js-bundle@3.29.1/minified.min.js"></script>
    <link rel="stylesheet" href="/Lib/material-icons/iconfont/material-icons.css">
    <link rel="stylesheet" href="/Lib/quasar/quasar.css">
    <link rel="stylesheet" href="/Frame/CSS/roboto-local.css">
    <link rel="stylesheet" href="/Frame/CSS/Boot.css">
    <link rel="stylesheet" href="/Lib/jq/jquery-ui.min.css">
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="/Lib/monaco-editor/min/vs/editor/editor.main.css" />
    <link rel="stylesheet" href="/Lib/primeflex/primeflex.css">
    <link rel="stylesheet" href="/Lib/primeflex/themes/saga-blue.css">
    <link rel="stylesheet" href="/Lib/vue-select/vue-select.css">
    <script> "function" != typeof JSON.decycle && (JSON.decycle = function (e, t) { "use strict"; var n = new WeakMap; return function e(a, r) { var o, c; return void 0 !== t && (a = t(a)), "object" != typeof a || null === a || a instanceof Boolean || a instanceof Date || a instanceof Number || a instanceof RegExp || a instanceof String ? a : void 0 !== (o = n.get(a)) ? { $ref: o } : (n.set(a, r), Array.isArray(a) ? (c = [], a.forEach((function (t, n) { c[n] = e(t, r + "[" + n + "]") }))) : (c = {}, Object.keys(a).forEach((function (t) { c[t] = e(a[t], r + "[" + JSON.stringify(t) + "]") }))), c) }(e, "$") }), "function" != typeof JSON.retrocycle && (JSON.retrocycle = function retrocycle($) { "use strict"; var px = /^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\(?:[\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*")\])*$/; return function rez(value) { value && "object" == typeof value && (Array.isArray(value) ? value.forEach((function (element, i) { if ("object" == typeof element && null !== element) { var path = element.$ref; "string" == typeof path && px.test(path) ? value[i] = eval(path) : rez(element) } })) : Object.keys(value).forEach((function (name) { var item = value[name]; if ("object" == typeof item && null !== item) { var path = item.$ref; "string" == typeof path && px.test(path) ? value[name] = eval(path) : rez(item) } }))) }($), $ }); </script>
    <script src="/Lib/socket-io-client.js"></script>
    <script src="/Lib/rxjs.umd.min.js"></script>
    <script src="/Lib/sortablejs/Sortable.min.js"></script>
    <script src="/Lib/dexie/dexie.min.js"></script>
    <script src="/Lib/vue/vue.global.min.js"></script>
    <script src="/Lib/vue-select/vue-select.umd.js"></script>
    <script src="/Lib/vuedraggable/vuedraggable.umd.min.js"></script>
    <script src="/Lib/@vueuse/shared@9.13.0/index.iife.min.js"></script>
    <script src="/Lib/@vueuse/core@9.13.0/index.iife.min.js"></script>
    <script src="/Lib/@vueuse/rxjs/index.iife.min.js"></script>
    <script src="/Lib/vue3-shortkey.min.js"></script>
    <script src="/Lib/jq/jquery.js"></script>
    <script src="/Lib/jq/jquery-ui.min.js"></script>
    <script src="/Lib/jq/touch.js"></script>
    <script src="/Lib/mitt.umd.js"></script>
</head>

<body onload="AppStart_Step_1()">

    <div id="app-div">
        {{2+2}} <br />
        <draggable v-model="myArray2" group="people" @start="drag=true" @end="drag=false" item-key="id">
            <template #item="{element}">
                <div>{{element}}</div>
            </template>
        </draggable>
    </div>

    <script>
        var g = globalThis;
        g.d = {}
        g.r = Vue.reactive({
            IsLive: true,
            IsEditor: true
        })

        async function AppStart_Step_1() {
            var new_f = {
                remove_app: function () {
                    if (g.App) {
                        g.App_Wrapper.unmount()
                        $('#app-div').removeAttr('data-v-app')
                    }
                },
                Create_Default_App: function () {
                    g.App_Wrapper.use(Quasar)
                    // vuedraggable
                    g.App_Wrapper.component("draggable", g.vuedraggable)
                    g.App_Wrapper.component("monaco-editor", g.comps.monaco_editor)
                    g.App_Wrapper.component("toggle-content", g.comps.toggle_content)
                    g.App_Wrapper.component("json-editor", g.comps.json_editor)
                    g.App_Wrapper.component("j-string", g.comps.j_string)
                    g.App_Wrapper.component("j-number", g.comps.j_number)
                    g.App_Wrapper.component("j-boolean", g.comps.j_boolean)
                    g.App_Wrapper.component("j-object", g.comps.j_object)
                    g.App_Wrapper.component("j-array", g.comps.j_array)
                    g.App_Wrapper.component("j-function-basic", g.comps.j_function_basic)
                    g.App_Wrapper.component("j-function-arrow", g.comps.j_function_arrow)
                    g.App_Wrapper.component("j-function-async", g.comps.j_function_async)
                    g.App_Wrapper.component("v-select", window["vue-select"])
                    g.App = g.App_Wrapper.mount('#app-div')
                },
                got_msg(socket, data, c_back) {
                    switch (data.type) {
                        case 'runEV': eval(data.data); break;
                        default: break;
                    }
                },
                add_socket: function () {
                    g.socket = io(g.f.get_socket_address())
                    socket.on('connect', function () { });
                    socket.on('disconnect', function (socket) { console.log('socket dis-connected to server'); });
                    socket.on('reconnect', function (socket) { console.log('socket re-connect to server'); });
                    socket.on('msg', function (data, c_back) { g.f.got_msg(socket, data, c_back) });
                },
                DB: {
                    Init: async function () {
                        var a = [
                            {
                                name: "App",
                                app_version: "1.0",
                                log_status: false,
                                default_lang: 'not-set'
                            },
                            { name: "Pages", data: [] },
                            { name: "Comps", data: [] },
                            { name: "Temps", data: [] }
                        ]
                        await g.db.settings.bulkAdd(a);
                    },
                    Delete: async function () {
                        await g.db.delete();
                        Dexie.delete('ShreeRam');
                        location.reload()
                    }
                }
            }
            g.f = { ...g.f, ...new_f }

            g.App_Wrapper = Vue.createApp({
                data(){
                    return {
                        myArray:[1,2]
                    }
                },
                computed:{
                    myArray2:function(){
                        return g.f.obj_to_array(this.myArray)
                    }

                }
            })
            g.f.Create_Default_App()

        }



    </script>

    <script src="/Frame/JS/App/app.js"></script>

    <div>
        <script src="/Lib/quasar/quasar.js"></script>
        <script> var require = { paths: { vs: '/Lib/monaco-editor/min/vs' } }; </script>
        <script src="/Lib/monaco-editor/min/vs/loader.js"></script>
        <script src="/Lib/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
        <script src="/Lib/monaco-editor/min/vs/editor/editor.main.js"></script>
    </div>

</body>

</html>