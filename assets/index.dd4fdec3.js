import{c as k,f as w,i as N}from"./vendor.719c5f33.js";const j=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(n){if(n.ep)return;n.ep=!0;const t=r(n);fetch(n.href,t)}};j();const C="modulepreload",v={},P="/",$=function(s,r){return!r||r.length===0?s():Promise.all(r.map(a=>{if(a=`${P}${a}`,a in v)return;v[a]=!0;const n=a.endsWith(".css"),t=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${t}`))return;const o=document.createElement("link");if(o.rel=n?"stylesheet":C,n||(o.as="script",o.crossOrigin=""),o.href=a,document.head.appendChild(o),n)return new Promise((l,i)=>{o.addEventListener("load",l),o.addEventListener("error",i)})})).then(()=>s())};var D=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",[r("div",{staticClass:"add-form pure-form"},[r("div",{staticClass:"f-input"},[e.needName?r("input",{directives:[{name:"model",rawName:"v-model",value:e.keyName,expression:"keyName"}],staticClass:"f-input-m",attrs:{type:"text",placeholder:"name"},domProps:{value:e.keyName},on:{input:function(a){a.target.composing||(e.keyName=a.target.value)}}}):e._e(),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.formatSelected,expression:"formatSelected"}],staticClass:"f-input-m",on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var o="_value"in t?t._value:t.value;return o});e.formatSelected=a.target.multiple?n:n[0]}}},e._l(e.formats,function(a,n){return r("option",{key:n,domProps:{value:a}},[e._v(`
          `+e._s(a)+`
        `)])}),0),e._v(" "),e._m(0),e._v(" "),e.formatSelected!="array"&&e.formatSelected!="object"?[e.formatSelected=="string"?r("input",{directives:[{name:"model",rawName:"v-model",value:e.valName,expression:"valName"}],staticClass:"f-input-m",attrs:{type:"text",placeholder:"value"},domProps:{value:e.valName},on:{input:function(a){a.target.composing||(e.valName=a.target.value)}}}):e._e(),e._v(" "),e.formatSelected=="number"?r("input",{directives:[{name:"model",rawName:"v-model",value:e.valName,expression:"valName"}],staticClass:"f-input-m",attrs:{type:"number",placeholder:"value"},domProps:{value:e.valName},on:{change:e.dealNumber,input:function(a){a.target.composing||(e.valName=a.target.value)}}}):e._e(),e._v(" "),e.formatSelected=="boolean"?r("select",{directives:[{name:"model",rawName:"v-model",value:e.valName,expression:"valName"}],staticClass:"f-input-m",attrs:{name:"value"},on:{change:[function(a){var n=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var o="_value"in t?t._value:t.value;return o});e.valName=a.target.multiple?n:n[0]},e.dealBoolean]}},[r("option",{domProps:{value:!0}},[e._v("true")]),e._v(" "),r("option",{domProps:{value:!1}},[e._v("false")])]):e._e()]:e._e()],2),e._v(" "),r("div",{staticClass:"f-btns"},[r("button",{staticClass:"pure-button f-confirm",on:{click:e.confirm}},[e._v(`
        `+e._s(this.formBtnText.confirmText)+`
      `)]),e._v(" "),r("button",{staticClass:"pure-button",on:{click:e.cancel}},[e._v(`
        `+e._s(this.formBtnText.cancelText)+`
      `)])])])])},T=[function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"f-input-m"},[r("b",[e._v(":")])])}];function p(e,s,r,a,n,t,o,l){var i=typeof e=="function"?e.options:e;s&&(i.render=s,i.staticRenderFns=r,i._compiled=!0),a&&(i.functional=!0),t&&(i._scopeId="data-v-"+t);var c;if(o?(c=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(d=__VUE_SSR_CONTEXT__),n&&n.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(o)},i._ssrRegister=c):n&&(c=l?function(){n.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(i.functional){i._injectStyles=c;var m=i.render;i.render=function(b,f){return c.call(f),m(b,f)}}else{var u=i.beforeCreate;i.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:i}}const S={name:"ItemAddForm",data(){return{formats:["string","array","object","number","boolean"],formatSelected:"string",keyName:"",valName:""}},props:{needName:{default:!0}},inject:["formBtnText"],methods:{confirm:function(){let e=null;this.formatSelected==="array"||this.formatSelected==="object"?e=[]:e=this.valName;let s={key:this.needName?this.keyName:null,val:e,type:this.formatSelected};this.$emit("confirm",s),this.keyName="",this.valName="",this.formatSelected="string"},cancel:function(){this.$emit("cancel")},dealBoolean:function(){this.valName=Boolean(this.valName)},dealNumber:function(){this.valName=Number(this.valName)}}},h={};var I=p(S,D,T,!1,x,"0b719ba2",null,null);function x(e){for(let s in h)this[s]=h[s]}var V=I.exports,A=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"json-view-main"},[r("div",{staticClass:"block_content"},[r("draggable",{attrs:{handle:".dragbar"},on:{end:e.onDragEnd},model:{value:e.flowData,callback:function(a){e.flowData=a},expression:"flowData"}},e._l(e.flowData,function(a,n){return r("div",{key:""+a.type+n,class:["block","clearfix",{"hide-block":e.hideMyBlock[n]==!0}]},[r("span",{staticClass:"json-key"},[typeof a.name=="string"?r("input",{directives:[{name:"model",rawName:"v-model",value:a.name,expression:"item.name"}],staticClass:"key-input",attrs:{type:"text"},domProps:{value:a.name},on:{blur:function(t){return e.keyInputBlur(a,t)},input:function(t){t.target.composing||e.$set(a,"name",t.target.value)}}}):e._e(),e._v(" "),a.type=="object"||a.type=="array"?r("i",{staticClass:"collapse-down v-json-edit-icon-arrow_drop_down",on:{click:function(t){return e.closeBlock(n,t)}}}):e._e(),e._v(" "),a.type=="object"?r("i",{staticClass:"i-type"},[e._v(e._s("{"+a.childParams.length+"}"))]):e._e(),e._v(" "),a.type=="array"?r("i",{staticClass:"i-type"},[e._v(e._s("["+a.childParams.length+"]"))]):e._e()]),e._v(" "),r("span",{staticClass:"json-val"},[a.type=="object"?[r("json-view",{attrs:{parsedData:a.childParams},model:{value:a.childParams,callback:function(t){e.$set(a,"childParams",t)},expression:"item.childParams"}})]:a.type=="array"?[r("array-view",{attrs:{parsedData:a.childParams},model:{value:a.childParams,callback:function(t){e.$set(a,"childParams",t)},expression:"item.childParams"}})]:[r("span",{staticClass:"val"},[a.type=="string"?r("input",{directives:[{name:"model",rawName:"v-model",value:a.remark,expression:"item.remark"}],staticClass:"val-input",attrs:{type:"text"},domProps:{value:a.remark},on:{input:function(t){t.target.composing||e.$set(a,"remark",t.target.value)}}}):e._e(),e._v(" "),a.type=="number"?r("input",{directives:[{name:"model",rawName:"v-model.number",value:a.remark,expression:"item.remark",modifiers:{number:!0}}],staticClass:"val-input",attrs:{type:"number"},domProps:{value:a.remark},on:{input:[function(t){t.target.composing||e.$set(a,"remark",e._n(t.target.value))},function(t){return e.numberInputChange(a)}],blur:function(t){return e.$forceUpdate()}}}):e._e(),e._v(" "),a.type=="boolean"?r("select",{directives:[{name:"model",rawName:"v-model",value:a.remark,expression:"item.remark"}],staticClass:"val-input",attrs:{name:"value"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(l){return l.selected}).map(function(l){var i="_value"in l?l._value:l.value;return i});e.$set(a,"remark",t.target.multiple?o:o[0])}}},[r("option",{domProps:{value:!0}},[e._v("true")]),e._v(" "),r("option",{domProps:{value:!1}},[e._v("false")])]):e._e()])]],2),e._v(" "),r("div",{staticClass:"tools"},[r("select",{directives:[{name:"model",rawName:"v-model",value:a.type,expression:"item.type"}],staticClass:"tools-types",on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,function(l){return l.selected}).map(function(l){var i="_value"in l?l._value:l.value;return i});e.$set(a,"type",t.target.multiple?o:o[0])},function(t){return e.itemTypeChange(a)}]}},e._l(e.formats,function(t,o){return r("option",{key:o,domProps:{value:t}},[e._v(e._s(t))])}),0),e._v(" "),r("i",{staticClass:"dragbar v-json-edit-icon-drag"}),e._v(" "),r("i",{staticClass:"del-btn",on:{click:function(t){return e.delItem(e.parsedData,a,n)}}},[r("i",{staticClass:"v-json-edit-icon-huishouzhan_huaban"})])])])}),0),e._v(" "),e.toAddItem?r("item-add-form",{on:{confirm:e.newItem,cancel:e.cancelNewItem}}):e._e(),e._v(" "),e.toAddItem?e._e():r("div",{staticClass:"block add-key",on:{click:e.addItem}},[r("i",{staticClass:"v-json-edit-icon-add"})])],1)])},B=[];const E={name:"JsonView",props:{parsedData:{}},data(){return{formats:["string","array","object","number","boolean"],flowData:this.parsedData,toAddItem:!1,hideMyBlock:{}}},created(){this.flowData=this.parsedData||{}},watch:{parsedData:{handler(e,s){this.flowData=this.parsedData}}},components:{"item-add-form":V,"array-view":()=>$(()=>import("./ArrayView.7dd2b301.js"),["assets/ArrayView.7dd2b301.js","assets/vendor.719c5f33.js"])},methods:{delItem:function(e,s,r){this.flowData.splice(r,1),this.hideMyBlock[r]&&(this.hideMyBlock[r]=!1),this.$emit("input",this.flowData)},closeBlock:function(e,s){this.$set(this.hideMyBlock,e,!this.hideMyBlock[e])},addItem:function(){this.toAddItem=!0},cancelNewItem:function(){this.toAddItem=!1},newItem:function(e){let s={name:e.key,type:e.type};if(e.type=="array"||e.type=="object"?(s.childParams=e.val,s.remark=null):(s.childParams=null,s.remark=e.val),s.name)this.flowData.push(s),this.$emit("input",this.flowData),this.cancelNewItem();else{alert("please must input a name!");return}},keyInputBlur:function(e,s){e.name.length<=0&&(alert("please must input a name!"),e.name="null",s.target.focus())},onDragEnd:function(){this.$emit("input",this.flowData)},itemTypeChange:function(e){(e.type==="array"||e.type==="object")&&(e.childParams=[],e.remark=null),e.type==="boolean"&&(e.remark=!0),e.type==="string"&&(e.remark=""),e.type==="number"&&(e.remark=0)},numberInputChange:function(e){e.remark||(e.remark=0)}}},y={};var O=p(E,A,B,!1,J,"2f146594",null,null);function J(e){for(let s in y)this[s]=y[s]}var _=O.exports,z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_}),M=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("json-view",{attrs:{parsedData:e.parsedData},model:{value:e.parsedData,callback:function(a){e.parsedData=a},expression:"parsedData"}})},F=[];const R={name:"JsonEditor",props:{objData:{type:[Object,Array],required:!0},options:{type:Object,default:function(){return{confirmText:"confirm",cancelText:"cancel"}}}},provide(){return{formBtnText:this.options}},data(){return{parsedData:[],wrapperType:"object"}},created(){this.lastParsedData={},this.parsedData=this.jsonParse(this.objData)},watch:{objData:{handler(e,s){this.parsedData=this.jsonParse(this.objData)}},parsedData:{handler(e,s){JSON.stringify(e)!==JSON.stringify(this.lastParsedData)&&(this.lastParsedData=k(e),this.$emit("input",this.makeJson(this.parsedData)))},deep:!0}},components:{"json-view":_},methods:{jsonParse:function(e){const s=n=>{let t=[];return Object.keys(n).forEach((l,i)=>{let c=n[l],m=c;this.getType(c)=="object"?m=s(c):this.getType(c)=="array"&&(m=r(c));let u={name:l,type:this.getType(c)};u.type=="array"||u.type=="object"?(u.childParams=m,u.remark=null):(u.childParams=null,u.remark=m),t.push(u)}),t},r=n=>{let t=[];for(let o=0;o<n.length;++o){let l=n[o],i=l;this.getType(l)=="object"?i=s(l):this.getType(l)=="array"&&(i=r(l));let c={name:null,type:this.getType(l)};c.type=="array"||c.type=="object"?(c.childParams=i,c.remark=null):(c.childParams=null,c.remark=i),t.push(c)}return t};return(n=>{let t=null;switch(this.getType(n)){case"array":this.wrapperType="array",t=r(n);break;case"object":this.wrapperType="object",t=s(n);break}return t})(e)},getType:function(e){switch(Object.prototype.toString.call(e)){case"[object Array]":return"array";case"[object Object]":return"object";case"[object Null]":case"[object Function]":case"[object Undefined]":return"string";default:return typeof e}},makeJson:function(e){const s=n=>{let t={};for(let o=0;o<n.length;++o){let l=n[o],i,c;i=l.name,l.type=="array"?c=r(l.childParams):l.type=="object"?c=s(l.childParams):c=l.remark,t[i]=c}return t},r=n=>{let t=[];for(let o=0;o<n.length;++o){let l=n[o],i;l.type=="array"?i=r(l.childParams):l.type=="object"?i=s(l.childParams):i=l.remark,t.push(i)}return t};return(n=>{let t=null;switch(this.wrapperType){case"array":t=r(n);break;case"object":t=s(n);break}return t})(e)}}},g={};var L=p(R,M,F,!1,U,null,null,null);function U(e){for(let s in g)this[s]=g[s]}var W=L.exports;Vue.component("Fragment",w);Vue.component("JsonEditor",W);Vue.use(N);AppStart();export{V as I,z as J,$ as _,p as n};
